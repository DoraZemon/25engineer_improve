<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/component/user/user_lib.cpp">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/component/user/user_lib.cpp" />
              <option name="originalContent" value="/**&#10;  ******************************************************************************&#10;  * @file           : user_lib.cpp&#10;  * @author         : 34147&#10;  * @brief          : None&#10;  * @attention      : None&#10;  * @date           : 25-5-31&#10;  ******************************************************************************&#10;  */&#10;&#10;&#10;#include &quot;user_lib.h&quot;&#10;&#10;&#10;/**&#10; * @brief 将输入变量x的值限制在min和max之间，改变其原值&#10; * @param x&#10; * @param min&#10; * @param max&#10; */&#10;void val_limit(float *x, float min, float max) {&#10;    if (*x &lt; min) {&#10;        *x = min;&#10;    }&#10;    if (*x &gt; max) {&#10;        *x = max;&#10;    }&#10;}&#10;&#10;/**&#10; * @brief 限制输入变量x的绝对值小于abs_max&#10; * @param x&#10; * @param abs_max&#10; */&#10;void abs_limit(float *x, float abs_max) {&#10;    if (*x &gt; abs_max) {&#10;        *x = abs_max;&#10;    }&#10;    if (*x &lt; -abs_max) {&#10;        *x = -abs_max;&#10;    }&#10;}&#10;&#10;//Hal库时钟自己定为1000&#10;uint32_t get_time_us() {&#10;    return TIM7-&gt;CNT;&#10;}&#10;&#10;uint32_t get_time_ms(void) {&#10;    return HAL_GetTick();&#10;}&#10;&#10;float get_time_ms_us() {&#10;    return ((float) get_time_ms() + (float) get_time_us() / 1000.0f);&#10;}&#10;&#10;uint16_t unsigned_16(uint8_t *p) {&#10;    uint16_t u;&#10;    memcpy(&amp;u, p, 2);&#10;    return u;&#10;}&#10;&#10;/**&#10; * @brief 返回限制在一个区间的值&#10; * @param val&#10; * @param min&#10; * @param max&#10; * @return&#10; */&#10;float limited_val(float val, float min, float max) {&#10;    VAL_LIMIT(val, min, max);&#10;    return val;&#10;}&#10;&#10;&#10;void low_pass(float &amp;target, float current, float alpha) {&#10;    float tmp = current - target;&#10;    target = target + alpha * tmp;&#10;}&#10;&#10;&#10;int float_to_uint(float x_float, float x_min, float x_max, int bits) {&#10;    /// Converts a float to an unsigned int, given range and number of bits ///&#10;    float span = x_max - x_min;&#10;    float offset = x_min;&#10;    return (int) ((x_float - offset) * ((float) ((1 &lt;&lt; bits) - 1)) / span);&#10;}&#10;&#10;float uint_to_float(int x_int, float x_min, float x_max, int bits) {&#10;    /// converts unsigned int to float, given range and number of bits ///&#10;    float span = x_max - x_min;&#10;    float offset = x_min;&#10;    return ((float) x_int) * span / ((float) ((1 &lt;&lt; bits) - 1)) + offset;&#10;}" />
              <option name="updatedContent" value="/**&#10;  ******************************************************************************&#10;  * @file           : user_lib.cpp&#10;  * @author         : 34147&#10;  * @brief          : None&#10;  * @attention      : None&#10;  * @date           : 25-5-31&#10;  ******************************************************************************&#10;  */&#10;&#10;&#10;#include &quot;user_lib.h&quot;&#10;&#10;&#10;/**&#10; * @brief 将输入变量x的值限制在min和max之间，改变其原值&#10; * @param x&#10; * @param min&#10; * @param max&#10; */&#10;void val_limit(float *x, float min, float max) {&#10;    if (*x &lt; min) {&#10;        *x = min;&#10;    }&#10;    if (*x &gt; max) {&#10;        *x = max;&#10;    }&#10;}&#10;&#10;/**&#10; * @brief 限制输入变量x的绝对值小于abs_max&#10; * @param x&#10; * @param abs_max&#10; */&#10;void abs_limit(float *x, float abs_max) {&#10;    if (*x &gt; abs_max) {&#10;        *x = abs_max;&#10;    }&#10;    if (*x &lt; -abs_max) {&#10;        *x = -abs_max;&#10;    }&#10;}&#10;&#10;//Hal库时钟自己定为1000&#10;uint32_t get_time_us() {&#10;    return TIM7-&gt;CNT;&#10;}&#10;&#10;uint32_t get_time_ms(void) {&#10;    return HAL_GetTick();&#10;}&#10;&#10;float get_time_ms_us() {&#10;    return ((float) get_time_ms() + (float) get_time_us() / 1000.0f);&#10;}&#10;&#10;uint16_t unsigned_16(uint8_t *p) {&#10;    uint16_t u;&#10;    memcpy(&amp;u, p, 2);&#10;    return u;&#10;}&#10;&#10;/**&#10; * @brief 返回限制在一个区间的值&#10; * @param val&#10; * @param min&#10; * @param max&#10; * @return&#10; */&#10;float limited_val(float val, float min, float max) {&#10;    VAL_LIMIT(val, min, max);&#10;    return val;&#10;}&#10;&#10;&#10;void low_pass(float &amp;target, float current, float alpha) {&#10;    float tmp = current - target;&#10;    target = target + alpha * tmp;&#10;}&#10;&#10;&#10;int float_to_uint(float x_float, float x_min, float x_max, int bits) {&#10;    /// Converts a float to an unsigned int, given range and number of bits ///&#10;    float span = x_max - x_min;&#10;    float offset = x_min;&#10;    return (int) ((x_float - offset) * ((float) ((1 &lt;&lt; bits) - 1)) / span);&#10;}&#10;&#10;float uint_to_float(int x_int, float x_min, float x_max, int bits) {&#10;    /// converts unsigned int to float, given range and number of bits ///&#10;    float span = x_max - x_min;&#10;    float offset = x_min;&#10;    return ((float) x_int) * span / ((float) ((1 &lt;&lt; bits) - 1)) + offset;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>